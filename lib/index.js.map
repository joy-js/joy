{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { AssetSource, GameObject, World, enableDebug, preload } from 'kiwiengine';\nimport { JoyObject, JoyObjectOptions } from './joy';\n\nlet gravity = 0;\nlet world: World | undefined;\nconst pendingObjects: GameObject[] = [];\n\nfunction $(opts?: JoyObjectOptions) {\n  const go = new JoyObject(opts);\n  world ? world.add(go) : pendingObjects.push(go);\n  return go;\n}\n\n$.enableDebug = enableDebug;\n$.preload = async (assets: AssetSource[], percentCallback: (percent: number) => void) => {\n  await preload(assets, (progress) => {\n    percentCallback(progress * 100);\n  });\n};\n\n$.gameWidth = window.innerWidth;\n$.gameHeight = window.innerHeight;\n\nwindow.addEventListener('resize', () => {\n  $.gameWidth = window.innerWidth;\n  $.gameHeight = window.innerHeight;\n});\n\nObject.defineProperty($, 'gravity', {\n  get() {\n    return gravity;\n  },\n  set(value: number) {\n    gravity = value;\n    if (world) world.gravity = value;\n  },\n});\n\n(window as any).$ = $;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  document.documentElement.style.width = '100%';\n  document.documentElement.style.height = '100%';\n  document.documentElement.style.margin = '0';\n  document.documentElement.style.padding = '0';\n\n  document.body.style.width = '100%';\n  document.body.style.height = '100%';\n  document.body.style.margin = '0';\n  document.body.style.padding = '0';\n  document.body.style.backgroundColor = 'black';\n  document.body.style.color = 'white';\n  document.body.style.overflow = 'hidden';\n\n  world = new World({ backgroundColor: 0x000000, gravity });\n  world.container.style.width = '100%';\n  world.container.style.height = '100%';\n  document.body.appendChild(world.container);\n\n  for (const go of pendingObjects) {\n    world.add(go);\n  }\n  pendingObjects.length = 0;\n});\n"]}